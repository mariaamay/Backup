# Лабораторная работа по архитектуре компьютера и ОС №1
## Описание проекта
Этот проект включает 4 shell-скрипта для управления файловой системой в Unix-подобных операционных системах. Скрипты предназначены для мониторинга памяти, которую занимает директория /log относительно виртуального раздела диска, архивирования старых файлов в /backup и удаления их из /log.
## Скрипты
### 1. [backup.sh](backup.sh)  
Этот скрипт проверяет сколько памяти в процентах занимает папка /log от текущего раздела виртуального диска, сравнивая текущий размер с заданным пороговым значением. Если папка превышает заданный процент, выполняются следующие шаги:
- Архивируются старые файлы в папку /backup.  
- Удаляются эти же файлы из папки /log.
  
#### Дополнительно:   
- Используется фильтрация по дате для выбора N самых старых файлов для архивации.  
- Для архивации используется команда tar с параметрами gz. 
- Чтобы пользователь мог узнать больше о возможностях скрипта, реализована поддержка команд ```-h``` и ```--help```
 #### Использование
 ```bash
./backup.sh /path/to/log X N
```
Где:  
- ```/path/to/log``` — путь к директории, которую необходимо проверить.
- ```X``` — порог заполненности в процентах (по умолчанию 70%).
- ```N``` - количество файлов для архивации (необязательный параметр, по умолчанию - 5 файлов)
#### Пример:
 ```bash
./backup.sh /home/user/documents 70 20
```

### 2. [test_backup.sh](test_backup.sh)  
Этот скрипт генерирует тест-кейсы для проверки корректности работы [backup.sh](backup.sh).  
#### Тест-кейсы, которые проверяемые скриптом: 
1. Проверка архивирования при превышении порога
2.  Нет архивации при нормальной заполненности
3. Проверка корректной работы без аргументов
4. Проверка корректной работы при параметре N > количество файлов
### 3. [create_virtual_disk.sh](creeate_virtual_disk.sh) 
Этот скрипт создает виртуальный раздел диска. Сначала создается файл-образ, затем с помощью файловой системы [FUSE](https://ru.wikipedia.org/wiki/FUSE_(%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8C_%D1%8F%D0%B4%D1%80%D0%B0)) монтируется директория.  
  
#### Дополнительно:   
- Чтобы пользователь мог узнать больше о возможностях скрипта, реализована поддержка команд ```-h``` и ```--help```
### 4. [delete_virtual_disk.sh](delete_virtual_disk.sh)
Этот скрипт удаляет виртуальный раздел диска. Сначала размонтируется раздел, затем удаляется файл-образ.  
  
#### Дополнительно:   
- Чтобы пользователь мог узнать больше о возможностях скрипта, реализована поддержка команд ```-h``` и ```--help```
  
## Установка и требования
- Необходима операционная система Unix-подобного типа (Linux, macOS и т.д.).
- Возможно понадобится дополнительная установка файловой системы [FUSE](https://ru.wikipedia.org/wiki/FUSE_(%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8C_%D1%8F%D0%B4%D1%80%D0%B0))

